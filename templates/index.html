<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes" />
        <meta name="description" content="" />
        <meta name="author" content="Mikko Lempinen & Vijaya M. Nair" />
        <meta content="sentiment, analysis, review, machine, learning" name="keywords">
        <title>Sentiment Analyzer</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.png" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!--JQuery-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/styles.css') }}">
        {{ turbo() }}
        <style>
            .ui-menu { width: 150px; }
        </style>
    </head>
    <body id="page-top">

        <!-- Application contents -->
        <section class="heatmap-section text-center" style="overflow:hidden;">
            <h2 style="margin-bottom: 20px; color: white;" >Sentiment Analyzer</h2>

            <!--Selection menu to pull data from a certain dataset-->
            <div>
                <h4 style="margin-bottom: 0px;color: white;">Select Dataset:</h4>
                <div class="select" style="display: inline-flex; width: 15em;">
                    <select name="dataset" id="dataset">   
                        <option value="hotel_reviews" selected>London Hotel Reviews</option>
                    </select>
                </div>
            </div>
            <!-- Selection menu to pick calculations to calculate-->
            <div>
                <h4 style="margin-bottom: 0px;color: white;">Select Calculations to Perform:</h4>
                <div class="select" style="display: inline-flex; width: 15em;">
                    <select name="calculation" id="calculation">
                        <option value="pearson" selected>Pearson's Correlation</option>
                        <option value="statistics">Statistics</option>
                    </select>
                </div>
            </div>
            <!-- Button to calculate the selected calculations -->
            <button class="button-64" type="submit" style="display: inline-flex;" onClick="updateCalcs()"><span class="text">Calculate</span></button>
            <!-- Selection menu to pick a graph to plot-->
            <div>
                <h4 style="margin-bottom: 0px;color: white;">Select a Graph to Plot:</h4>
                <div class="select" style="display: inline-flex; width: 20em;">
                    <select name="graphToPlot" id="graphToPlot">
                        <option value="sentistr" selected>SentiStrength Histogram</option>
                        <option value="categoryHistogram">Category Frequency Histogram</option>
                    </select>
                </div>
            </div>
            <!--Update Graph Button-->
            <button class="button-64" type="submit" style="display: inline-flex;" onClick="plotGraph()"><span class="text">Update Graph</span></button>
            <!--Graph element-->
            <turbo-frame id="turboGraph">
                <div style="margin-top: 0px;">
                    <div id='graph1' class="fullscreen-chart justify-content-center" style="margin-bottom: 80px;position: relative">
                        <div class="spinner-border text-light" id="hm-spinner" style="position: absolute; top: 27rem; left: 70rem; width: 4rem; height: 4rem; display: none;"></div>
                    </div>
                </div>
            </turbo-frame>
            <!--Calculation results element-->
            <turbo-frame if="turboText">
                <div>
                <div id="calcResults"></div>
                </div>
            </turbo-frame>
        </section>
        









        <!-- Footer-->
        <footer class="footer bg-black small text-center text-white-50">
            <div class="container px-4 px-lg-5">
                <ul class="social-icons social-icons-lg social-icons-muted justify-content-center mb-3">
                    <li><a data-toggle="tooltip" href="" target="_blank" title="" data-original-title="Twitter"><i class="fab fa-twitter"></i></a></li>
                </ul>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>-->
        <script src="static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script> 
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
        <!-- JavaScript-->
        <script src="{{ url_for('static',filename='js/scripts.js') }}"> </script>
        <!-- Plotly-->
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
        <script>
            graph1 = {{ graphJSON | safe}};
            var layout = {
                autosize: true,
                automargin: true,
            };
            var config = {
                scrollzoom: true,
                responsive: true,
                displaylogo: false,
                displayModeBar: true,
                modeBarButtonsToRemove: ['lasso2d', 'zoom2d', 'pan2d', 'resetScale2d', 'select2d', 'resetScale2d', 'hoverCompareCartesian', 'hoverClosestCartesian'],
                toImageButtonOptions: {
                    format: 'png', // one of png, svg, jpeg, webp
                    filename: 'sentiment_chart',
                    height: 1080,
                    width: 1920,
                    scale: 1 // Multiply title/legend/axis/canvas sizes by this factor
                  }
            };
            Plotly.setPlotConfig(config);
            Plotly.newPlot('graph1', graph1, layout);
            myPlot.on('plotly_hover', function(data){
                dragLayer.style.cursor = 'pointer'
            });
        </script>
    </body>
</html>