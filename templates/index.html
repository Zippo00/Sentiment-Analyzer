<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes" />
        <meta name="description" content="" />
        <meta name="author" content="Mikko Lempinen & Vijaya M. Nair & Janne Tahkola" />
        <meta content="sentiment, analysis, review, machine, learning" name="keywords">
        <title>Sentiment Analyzer</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.png" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!--JQuery-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/styles.css') }}">
        {{ turbo() }}
        <style>
            .ui-menu { width: 150px; }
        </style>
    </head>
    <body id="page-top">
        <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" style="font-weight: 900; background: -webkit-linear-gradient(130deg, #223d07, #6a8252 50%,#66cc00); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Sentiment Analyzer</a>
            </div>
        </nav>
        <!-- Application contents -->
        <section class="heatmap-section text-center" style="overflow:hidden;margin-top: 0px;">
            <!--Selection menu to pull data from a certain dataset-->
            <div class="justify-content-center"style="margin-bottom: 5em;">
                <h4 style="margin-bottom: 0px;color: #66cc00;">Select Dataset:</h4>
                <div class="select" style="display: inline-flex; width: 15em;">
                    <select name="dataset" id="dataset">   
                        <option value="hotel_reviews" selected>London Hotel Reviews</option>
                    </select>
                </div>
            </div>
            <!--Wrapper Div for graph + 2 selection menus-->
            <div class="justify-content-center"style="display: flex; flex-direction: row;">
                <!-- Selection menu to pick calculations to calculate-->
                <div>
                    <h5 style="margin-bottom: 0px;color: #66cc00;">Select a Calculation:</h5>
                    <div class="select" style="display: inline-flex; width: 10em;">
                        <select name="calculation" id="calculation">
                            <option value="task2" selected>Task 2.</option>
                            <option value="task3">Task 3.</option>
                            <option value="task6">Task 6.</option>
                            <option value="task8">Task 8.</option>
                            <option value="task9">Task 9.</option>
                            <option value="task12">Task 12.</option>
                        </select>
                    </div>
                    <!-- Button to calculate the selected calculations -->
                    <button class="button-64" type="submit" style="margin-top: 200px;" onClick="calculate()"><span class="text">Calculate</span></button>
                </div>
                <!--Graph element-->
                <turbo-frame id="turboGraph">
                    <div style="margin-top: 0px;">
                        <div id='graph1' class="justify-content-center" style="margin-bottom: 80px;margin-left: 4em;margin-right: 4em;width: 500px;height: 350px">
                            <div class="spinner-border" id="hm-spinner" style="position: absolute; top: 25rem; left: 48vw; width: 4rem; height: 4rem; color: #66cc00; display: none;"></div>
                        </div>
                    </div>
                </turbo-frame>
                <!-- Selection menu to pick a graph to plot-->
                <div>
                    <h5 style="margin-bottom: 0px;color: #66cc00;">Select a Graph to Plot:</h5>
                    <div class="select" style="display: inline-flex; width: 10em;">
                        <select name="graphToPlot" id="graphToPlot">
                            <option value="task3">Task 3.</option>
                            <option value="task4" selected>Task 4.</option>
                            <option value="task5_1">Task 5. (Positive)</option>
                            <option value="task5_2">Task 5. (Negative)</option>
                            <option value="task11">Task 11.</option>
                        </select>
                    </div>
                    <!--Update Graph Button-->
                    <button class="button-64" type="submit" style="margin-top: 200px;" onClick="plotGraph()"><span class="text">Update Graph</span></button>
                </div>
            </div>
            <!--Calculation results element-->
            <turbo-frame if="turboText">
                <div style="height: 30vh;">
                    <div id="calcResults">
                        <textarea class="terminal" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" id="terminal" cols="50" rows="50" style="width: 600px; height: 300px"></textarea> 
                    </div>
                </div>
            </turbo-frame>
        </section>
        <!-- Footer-->
        <footer class="footer bg-black small text-center text-white-50">
            <br>
            <br>
            <div class="container px-4 px-lg-5">
                <ul class="social-icons social-icons-lg social-icons-muted justify-content-center mb-3">
                    <li><a data-toggle="tooltip" href="https://github.com/Zippo00/Sentiment-Analyzer" target="_blank" title="" data-original-title="Github"><i class="fa-brands fa-github" style="color: #66cc00;"></i></a></li>
                </ul>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>-->
        <script src="static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
        <!-- JavaScript-->
        <script src="{{ url_for('static',filename='js/scripts.js') }}"> </script>
        <!-- Plotly-->
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
        <script>
            graph1 = {{ graphJSON | safe}};
            var layout = {
                autosize: true,
                automargin: true,
            };
            var config = {
                scrollzoom: true,
                responsive: true,
                displaylogo: false,
                displayModeBar: true,
                modeBarButtonsToRemove: ['lasso2d', 'zoom2d', 'pan2d', 'resetScale2d', 'select2d', 'resetScale2d', 'hoverCompareCartesian', 'hoverClosestCartesian'],
                toImageButtonOptions: {
                    format: 'png', // one of png, svg, jpeg, webp
                    filename: 'sentiment_analyzer_chart',
                    height: 1080,
                    width: 1920,
                    scale: 1 // Multiply title/legend/axis/canvas sizes by this factor
                  }
            };
            Plotly.setPlotConfig(config);
            Plotly.newPlot('graph1', graph1, layout);
            myPlot.on('plotly_hover', function(data){
                dragLayer.style.cursor = 'pointer'
            });
        </script>
    </body>
</html>
